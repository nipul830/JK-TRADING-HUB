<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>JK Trading Hub â€” Home</title>
  <link rel="icon" href="icon.png" />
  <style>
    /* ====== Base (dark) ====== */
    :root{
      --bg:#0f0f10; --panel:#141416; --panel2:#0f1113;
      --text:#e9e9ea; --muted:#a6a8ad; --b:#232428; --shadow:0 10px 28px rgba(0,0,0,.35);
      --green:#2ecc71; --red:#ff6b6b; --brand:#6dc5ff;
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,"Noto Sans",Arial}
    a{color:inherit;text-decoration:none}
    .container{max-width:1100px;margin:0 auto;padding:16px}

    /* ====== Top Nav ====== */
    .nav{position:sticky;top:0;z-index:20;background:linear-gradient(180deg,#101114 0%, #0f0f10 100%);border-bottom:1px solid var(--b)}
    .nav .wrap{display:flex;gap:10px;align-items:center;justify-content:space-between;max-width:1100px;margin:0 auto;padding:10px 16px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.3px}
    .tabs{display:flex;gap:10px;flex-wrap:wrap}
    .tab{padding:8px 12px;border:1px solid var(--b);border-radius:10px;background:var(--panel2);color:var(--muted)}
    .tab.active{background:#1d2630;color:#e9f3ff;border-color:#2b3642}

    /* ====== Card / Headline ====== */
    .hero{background:var(--panel);border:1px solid var(--b);border-radius:16px;padding:18px;box-shadow:var(--shadow);margin-top:16px}
    .hero h1{margin:0 0 6px;font-size:32px}
    .hero p{margin:0;color:var(--muted)}

    /* ====== ALGO BLOCK ====== */
    .algo-wrap{max-width:980px;margin:18px auto 28px}
    .card{background:var(--panel);border:1px solid var(--b);border-radius:16px;padding:16px;box-shadow:var(--shadow)}
    .algo-head{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:12px}
    .algo-head h2{margin:0;font-size:22px;letter-spacing:.2px}
    .badge{font-size:12px;padding:6px 10px;border-radius:999px;border:1px solid var(--b);color:var(--muted);background:#131516}
    .badge.running{background:#0b3d21;border-color:#1c6b3a;color:#aef3c3}
    .badge.stopped{background:#3d0b0b;border-color:#6b1c1c;color:#f3aeae}

    .grid-2{display:flex;flex-wrap:wrap;gap:12px;align-items:center;margin-bottom:10px}
    .f{display:flex;flex-direction:column;gap:6px;min-width:140px}
    .f span{color:var(--muted);font-size:12px}
    select{appearance:none;background:var(--panel2);border:1px solid var(--b);color:var(--text);border-radius:12px;padding:10px 12px;outline:none}
    .btns{display:flex;gap:10px;margin-top:6px}
    .btn{border:1px solid var(--b);background:#16181b;color:#eee;padding:10px 14px;border-radius:12px;cursor:pointer}
    .btn.primary{background:#123321;border-color:#2e7d32}
    .btn.danger{background:#3d1a1a;border-color:#7d2e2e}

    .live{display:flex;flex-wrap:wrap;gap:14px;align-items:center;margin-top:10px}
    .live .price{font-size:28px;font-weight:800;letter-spacing:.3px}
    .signal{font-size:18px;font-weight:800}
    .signal.buy{color:var(--green)}
    .signal.sell{color:var(--red)}
    .note{margin-top:6px;color:var(--muted);font-size:12px}

    /* ====== Footer spacer ====== */
    .spacer{height:80px}
  </style>
</head>
<body>

  <!-- Top nav -->
  <div class="nav">
    <div class="wrap">
      <div class="brand">ðŸš€ JK Trading Hub</div>
      <div class="tabs">
        <a class="tab active" href="index.html">Home</a>
        <a class="tab" href="market.html">Market</a>
        <a class="tab" href="trade.html">Trade</a>
        <a class="tab" href="discover.html">Discover</a>
        <a class="tab" href="account.html">Account</a>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- Intro -->
    <section class="hero">
      <h1>JK Trading Hub</h1>
      <p>Home par lightweight <b>JKâ€‘ALGO</b> controls. Pair/Timeframe choose karke Start dabao â€” live price aayega aur demo BUY/SELL signal dikhega.</p>
    </section>

    <!-- === ALGO CONTROL (HOME) === -->
    <section class="card algo-wrap">
      <div class="algo-head">
        <h2>JK ALGO</h2>
        <span id="algoStatus" class="badge stopped">Stopped</span>
      </div>

      <div class="grid-2">
        <label class="f">
          <span>Pair</span>
          <select id="pairSel">
            <option value="BTCUSDT">BTC/USDT</option>
            <option value="ETHUSDT">ETH/USDT</option>
            <option value="SOLUSDT">SOL/USDT</option>
            <option value="XRPUSDT">XRP/USDT</option>
          </select>
        </label>

        <label class="f">
          <span>Timeframe</span>
          <select id="tfSel">
            <option value="1m">1m</option>
            <option value="5m" selected>5m</option>
            <option value="15m">15m</option>
            <option value="1h">1h</option>
            <option value="4h">4h</option>
          </select>
        </label>

        <div class="btns">
          <button id="btnStart" class="btn primary">Start</button>
          <button id="btnStop" class="btn danger">Stop</button>
        </div>
      </div>

      <div class="live">
        <div style="color:var(--muted);font-weight:700;letter-spacing:.2px" id="pairTitle">BTC/USDT</div>
        <div class="price" id="livePrice">â€“</div>
        <div class="signal" id="algoSignal">â€”</div>
      </div>

      <div class="note">Demo signal logic used (just for UI). Real strategy plugâ€‘in later.</div>
    </section>

    <div class="spacer"></div>
  </div>

  <!-- ===== Logic (no external deps) ===== -->
  <script>
  (()=>{
    const pairSel = document.getElementById('pairSel');
    const tfSel   = document.getElementById('tfSel');
    const status  = document.getElementById('algoStatus');
    const priceEl = document.getElementById('livePrice');
    const sigEl   = document.getElementById('algoSignal');
    const pairT   = document.getElementById('pairTitle');

    let timer = null;

    function fmt(n){
      if(!isFinite(n)) return 'â€“';
      if(n >= 1000) return n.toLocaleString(undefined,{maximumFractionDigits:2});
      return n.toFixed(4).replace(/0+$/,'').replace(/\.$/,'');
    }

    async function fetchPrice(sym){
      // Binance public price
      const r = await fetch(`https://api.binance.com/api/v3/ticker/price?symbol=${sym}`, {cache:'no-store'});
      if(!r.ok) throw new Error('HTTP '+r.status);
      const j = await r.json();
      return Number(j.price);
    }

    async function tick(){
      const sym = pairSel.value;
      try{
        const p = await fetchPrice(sym);
        priceEl.textContent = fmt(p);

        // --- demo signal: fluctuate on price last digit + timeframe weight
        const tf = tfSel.value;
        const w  = ({'1m':1,'5m':2,'15m':3,'1h':4,'4h':5})[tf] || 1;
        const buy = Math.round(p*100) % (2*w) === 0;

        sigEl.textContent = buy ? 'BUY' : 'SELL';
        sigEl.className   = 'signal ' + (buy?'buy':'sell');
      }catch(e){
        priceEl.textContent = 'â€“';
        sigEl.textContent   = 'Error';
        sigEl.className     = 'signal';
      }
    }

    function setPairTitle(){
      const map = {BTCUSDT:'BTC/USDT',ETHUSDT:'ETH/USDT',SOLUSDT:'SOL/USDT',XRPUSDT:'XRP/USDT'};
      pairT.textContent = map[pairSel.value] || pairSel.value;
    }

    document.getElementById('btnStart').onclick = ()=>{
      if(timer) return;
      status.textContent='Running';
      status.className='badge running';
      setPairTitle();
      tick();
      timer = setInterval(tick, 4000); // 4s
    };

    document.getElementById('btnStop').onclick = ()=>{
      clearInterval(timer); timer=null;
      status.textContent='Stopped';
      status.className='badge stopped';
    };

    pairSel.onchange = ()=>{ setPairTitle(); if(timer) tick(); };
    tfSel.onchange   = ()=>{ if(timer) tick(); };

    // Optional: auto-start on load (comment out if you donâ€™t want)
    // document.getElementById('btnStart').click();
  })();
  </script>
</body>
</html>
